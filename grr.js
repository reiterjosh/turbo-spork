if(console.log("version 1.2"),counter)throw counter.init(),"Code already loaded.";function f(){f.on=!f.on,f.on?($(".tokens, table>, .parses, .domain").removeAttr("style"),$(".terminal-node").css("color","black")):(highlight(),alternateRows(),$(".parses:contains(default)").fadeTo(0,.4),probeReference())}function searchLocal(){var e=window.getSelection().toString().replace(/\[[^\s]* |]/g,"").replace(/\s/g,"%20"),t=$(".data:last a").attr("href");e&&t&&(t=t.match(/(?:=)(.*)(?:&z)/)[1],window.open("https://www.google.com/maps/search/"+e+"/@"+t+",10z","_blank"))}function probeReference(){$(".terminal-node:contains(success)").css("color","green"),$(".terminal-node:contains(failure)").css("color","red"),$(".domain:odd").click(function(){if($(".category-wrapper").css("color",""),$(this).css("border-bottom").indexOf("solid")>-1)$(this).css("border-bottom","");else{$(".domain:odd").css("border-bottom","");var e=$(this).text().trim();$(this).css("border-bottom","solid darkorange");var t=$(".category-wrapper:contains("+e+")");!t.length&&e.length&&(t=$(".category-wrapper:contains("+e.split("-").slice(-1)[0]+")")),t.css("color","darkorange");for(var n=$(this).parent().prev().text(),i=[["answerFacts","wolfram"],["encyclopedia","parsec"]],o=0;o<i.length;o++)n.indexOf(i[o][0])>-1&&t.parent().next().find(".category-wrapper").each(function(){$(this).parent().next().is(":contains("+i[o][1]+")")&&$(this).css("color","darkorange")})}}),$(".domain:odd").each(function(){var e=$(this).text().trim(),t=$(this).parent().prev().text(),n=$(".category-wrapper:contains("+e+")");if(!n.length&&e.length&&(n=$(".category-wrapper:contains("+e.split("-").slice(-1)[0]+")")),n.length)for(var i=[["answerFacts","wolfram"],["encyclopedia","parsec"]],o=0;o<i.length;o++)if(t.indexOf(i[o][0])>-1){var s=n.parent().next().find(".terminal-node:contains("+i[o][1]+")");s.length&&$(this).css("color",s.is(":contains(success)")?"green":"red")}})}function shrinkUD(){var e=$("#user-browser"),t=e.find(".body").hide();e.dblclick(function(){t.toggle()})}function highlight(){var e=$(".tokenparse-wrapper");e.find(".tokens").removeAttr("style"),e.each(function(){$(this).find(".tokens").each(function(){var t=$(this);e.each(function(){var e=!1;$(this).find(".tokens").each(function(){t.text()===$(this).text()&&(e=!0)}),e||t.css("color","royalblue")})})}),$(".tokens[style]").dblclick(function(){var e=$(this).text().trim();$(".tokens[style]").each(function(){$(this).text().trim()===e&&$(this).css("color","green")})})}function sortRows(){$("table>").sort(function(e,t){return $(t).find(".domain").text().toLowerCase()<$(e).find(".domain").text().toLowerCase()?1:-1}).appendTo("table")}function alternateRows(){var e=$(),t=["white","#E0E0E0"],n=0;$(".domain:even").each(function(){$(this).text()!==e.text()&&(n=1-n),$(this).parent().parent().css("background-color",t[n]),e=$(this)})}function shortcutsDisabled(){var e=event.metaKey||event.altKey,t=$("input[type='text']").is(":focus")||$(".swal2-modal.show-swal2").length;return(e||t)&&"/"!==event.key}function linkOnt(){var e="https://lingo.siri.apple.com/production-en/ontology/";$(".domain").click(function(t){var n=$(this).text().trim();t.metaKey&&window.open(e+n+"/description","_blank")}),$(".verb, .parses").click(function(t){var n=$(this).text().trim(),i=$(this).closest(":has(.domain)").find(".domain").text().trim(),o=$(this).is(".verb")?"verb":"parse";t.metaKey&&("verb"===o&&(n=n.replace("verb: ","")),window.open(e+i+"/labels/"+o+"-label/"+n+"/description","_blank"))})}function linkDomainSites(){var e="https://www.wolframalpha.com/input/?i=",t="https://www.google.com/search?q=";function n(e,t,n){if(t.metaKey){var i=window.getSelection().toString().split("\n").join("+");i||(i=e.find(".tokens").map(function(){return $.trim($(this).text())}).get().join("+")),window.open(n+i,"_blank")}}$(".terminal-node:contains(wolframAlphaQuery)").click(function(){if(event.metaKey){var t=$(this).text().trim().split(" ").slice(1).join("+");window.open(e+t,"_blank")}}),$("table>:contains(answerFacts) .tokenparse-wrapper").click(function(){n($(this),event,e)}),$("table>:has(:contains(webSearch),:contains(encyclopedia)) .tokenparse-wrapper").click(function(){n($(this),event,t)}),$("table>:contains(media) .tokenparse-wrapper").click(function(){n($(this),event,"https://www.google.com/search?q=site:itunes.apple.com/us/ ")})}document.addEventListener("keydown",function(e){if(!shortcutsDisabled()&&"Tab"!==e.key&&!$(e.target).is("[contenteditable]")){$("input[type=text]").not(":focus")&&!e.metaKey&&e.preventDefault();var t="12345`".indexOf(e.key);if(t>-1){var n=$("table>:not(:first-child):hover");n.find(".item").eq(t).click(),n.css("border-left","solid gray 3px").mouseleave(function(){$(this).css("border-left","")})}switch(e.key){case"p":case"/":case"r":$("i.play.icon, i.pause.icon").click();break;case"ArrowLeft":case"[":$("button:contains(⇦)").not(".disabled").last().click();break;case";":case"ArrowRight":case"]":case"g":e.ctrlKey?$("#skip").click():$("button:contains(⇨)").not(".disabled").first().click();break;case"G":$("#skip").click();break;case"x":$(".ui.checkbox.slider input").click();break;case"c":var i=$(".parses");i.is(":visible")?i.hide():i.show();break;case"Clear":f();break;case"e":e.ctrlKey&&searchLocal()}}}),document.addEventListener("keydown",function(e){if(!shortcutsDisabled()){var t=["a","s","d","f"," "].indexOf(e.key),n=$(".row[data-v-141b311f]"),i=n.not(".center, :has(.selected)").add(n.last()).first(),o=n.filter("[style]").add(i).first();t>-1?(e.preventDefault(),o.find(".choice").eq(t).click()):"z"===e.key&&(o.removeAttr("style"),(o=o.prev().add(i).first()).is(".center")&&(o=o.prev()),o.css("background-color","#9ac9f8"),n.click(function(){n.removeAttr("style")}))}});var counter={docObj:$("<span contenteditable='true' tabindex='-1'>0</span"),projectName:$("#project-name").text(),skip:!0,id:"",init:function(){this.docObj.insertBefore("#skip").css("padding","9px"),localStorage.getItem(this.projectName)?this.docObj.text(localStorage.getItem(this.projectName)):localStorage.setItem(this.projectName,this.docObj.text()),this.observer.observe($("body")[0],{attributes:!0}),this.onload()},incr:function(){this.docObj.text(String(parseInt(this.docObj.text())+1)),localStorage.setItem(this.projectName,this.docObj.text())},onload:function(){var e=$(".audio-id").text();if(e!==this.id&&e){if(this.id=e,$(".request-group").click(function(){this.skip=!0}),$(".request.active").hasClass("gradable")||!$(".request-group").length){var t=!!$(".ui.positive.message").length;this.skip||t||this.incr(),this.skip=t}shrinkUD(),highlight(),alternateRows(),sortRows(),linkOnt(),linkDomainSites(),probeReference(),$(".parses:contains(default)").fadeTo(0,.4),$(".parses").hide(),$(".verb").css("color","gray"),$(".ui.positive.message").length||setTimeout(function(){$(".ui.checkbox.slider input").click()},100)}},observer:new MutationObserver(function(e){e.forEach(function(e){($(e.target).hasClass("pace-done")||$(".pace-progress").attr("data-progress-text").indexOf("99")>-1)&&counter.onload()})})};counter.init();
